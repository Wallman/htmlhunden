<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width initial-scale=1.0">
<title>HTMLHunden | En pragmatisk höghastighetsguide till webbutveckling, använd vid Uppsala Universitet</title>
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.no-icons.min.css">
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css">
<link rel="stylesheet" href="/dist/assets/stylesheets/main.css">
<link rel="stylesheet" href="/dist/assets/stylesheets/prism.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- Feedback tab--><link rel="stylesheet" href="http://getbarometer.s3.amazonaws.com/assets/barometer/css/barometer.css">
<script src="http://getbarometer.s3.amazonaws.com/assets/barometer/javascripts/barometer.js"></script>
<script>BAROMETER.load('zFXKA2467y8YdpZaQK3gq');</script>
<script>
if(document.location.hostname.search("localhost") === -1 && document.location.origin !== "file://"){
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-45465391-1', 'htmlhunden.se');
ga('send', 'pageview');
}
</script>
<body id="paginated">
<div class="container"><h2>AJAX och PHP</h2><p>AJAX (Asynkron JavaScript och XML) är ett samlingsnamn som innefattar flera olika tekniker för att kunna uppdatera en sida utan att ladda om hela sidan. Detta kan vara praktiskt då vi kan behöva göra något på servern utan att störa användaren genom att behöva vänta på att sidan laddas om. De tekniker som används i samband med AJAX är:</p><p><code>XMLHttpRequest </code> är ett API för att kunna överföra och ta emot XML mellan server och klienten. </p><p><code>DOM </code> (Document Object Model) gör att vi tillåts med javascript ändra i dokumentet.</p><p><code>HTML</code> och <code>CSS</code> hur sidan representeras och vad som finns på sidan.</p><p><code> XML </code> som ibland används för att transportera och strukturera data. </p><p><code> Javascript </code> programmeringspråk.</p><p>Det går att använda AJAX med annat än php (exemepelvis ASP) men vi har gjort ett val att använda php. Egentligen skulle vi också kunna använda oss av javascript för att göra asynkrona anrop men eftersom det redan finns någon som abstraherat bort komplexitet så är det lika bra att utnyttja det, jQuery! Detta innebär att vi gör ett aktivt val att inte gå djupare i de nämnda teknikerna utan att vi "slutar jiddrar och börjar trolla".</p><h3>jQuery´s get()</h3><div class="panel panel-default"><div class="panel-heading">Ändra innehåll med utan att ladda om sidan med jQuery.</div><div class="panel-body"><pre><code class="language-php">$("button").click(function(){
 $.get("test.php",function(data,status){
 $( ".result" ).html( data );
 });
});</code></pre><div class="panel panel-default"></div></div></div><p>Som ni ser har vi på en knapp som vid ett knapptryck gör ett HTTP GET request till servern. Innan vi börjar gå igenom i detaljom vad som händer kan det vara en god idé att se den sidan som vi efterfrågar, alltså test.php.</p><div class="panel panel-default"><div class="panel-heading">Sidan som efterfrågas </div><div class="panel-body"><pre><code class="language-php">&lt;?php
  echo "Hello med AJAX";
?&gt;</code></pre><div class="panel panel-default"></div></div></div><p>jQuery´s get tar emot två argument (1) URL:en till vilken sida som efterfrågas (2) en callback, alltså vad som skall göras 
när requesten är klar. Det kan ibland finnas tillfällen då vi vill skicka med information till servern för att göra något med 
datat, exempelvis lägga in eller hämta något från en databas. Att skicka med argument görs med <code> { name:"Me", lname:"Myself" } </code>. 
Det skickas med som ett andra argument i functionen get().</p><h3>jQuery get() med parametrar </h3><div class="panel panel-default"><div class="panel-heading">Sidan som efterfrågas </div><div class="panel-body"><pre><code class="language-php">$("button").click(function(){
  $.get("test.php",
  {
    name:"Me",
    lname:"Myself"
  },
  function(data,status){
   alert("Lyssna på vad sidan säger dig!"");
  });
});</code></pre><div class="panel panel-default"></div></div></div><p>php test ser nu ut som denna: </p><div class="panel panel-default"><div class="panel-heading">Sidan som efterfrågas </div><div class="panel-body"><pre><code class="language-php">&lt;?php
  $fname ,city
  $fname= $_GET["name"]
  $lname= $_GET["lname"]
  echo "kära" . $fname . $lname . "du duger!";
?&gt;</code></pre><div class="panel panel-default"></div></div></div><h3>jQuery´s load()</h3><p>jQurey´s load method är ganska lika get men den har en implicit callbackfunktion som gör det möjligt att kunna skriva:</p><code>$("#result").load("test.php"); </code> och det som händer är att den själv fyller på elementet med innehållet. Man kan även skicka med 
en ytterligare callbackfunktion och då kommer det köras EFTER det matchande elementet har fyllts på med innehållet från test.php.<div class="panel panel-default"><div class="panel-heading">Load() med callback.</div><div class="panel-body"><pre><code class="language-php">$( "#result" ).load( "test.php", function() {
alert( "Success!" );
});</code></pre><div class="panel panel-default"><div class="panel-heading">Resultat</div><div class="panel-body"></div></div></div></div><p>Att jobba med asynkrona anrop är kraftfullt och bör vara en viktig kunskap i verktygslådan som webbutvecklare. </p><div class="chapter-pagination"><p class="text-muted">Det här kapitlet är en del av en den interaktiva och pragmatiska höghastighetsguiden till webbutveckling &mdash; <a href="http://htmlhunden.se">HTMLHunden</a>. Använd knapparna nedan för att läsa vidare eller navigera till innehållsförteckningen.</p><div class="text-center"><div class="btn-group"><a href="08-06-php-refactoring.html" title="Föregående kapitel" class="btn btn-lg btn-default pagination-prev"><span class="glyphicon glyphicon-arrow-left"></span></a><a href="/" title="Hem" class="btn btn-lg btn-default pagination-prev"><span class="glyphicon glyphicon-home"></span></a><a href="/dist/toc.html" title="Innehållsförteckning" class="btn btn-lg btn-default pagination-prev"><span class="glyphicon glyphicon-list"></span></a><a href="09-00-mysql-intro.html" title="Nästa kapitel" class="btn btn-lg btn-default pagination-next"><span class="glyphicon glyphicon-arrow-right"></span></a></div></div></div></div> <!-- container --><script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script><script src="/dist/assets/javascripts/jquery.fittext.js"></script><script src="/dist/assets/javascripts/prism.js"></script><script src="/dist/assets/javascripts/main.js"></script></body>